<!-- items.html -->
<html>

<head>
  <title>Auction Items</title>
</head>

<body>
  <h1>Auction Items</h1>
  <div id="itemsList"></div>

  <script>
    const pathArray = window.location.pathname.split('/');
    const session_ID = pathArray[pathArray.length - 1];

    console.log(session_ID);
    console.log(session_ID);
    // Fetch items data from the server
    fetch(`/auth/item_by_session/${session_ID}`, {
      method: 'GET',
    })
      .then(response => response.json())
      .then(responseData => {
        // Ensure that items is an array
        const items = Array.isArray(responseData.items) ? responseData.items : [];
        console.log(items);
        let d = ''
        // Update HTML with items data
        items.forEach(item => {
          
          
          d += '<a id ="' + item.ID + '" href="/bid_item/' + item.ID + '">'
          d += '<p>' + item.Item_name + '</p>'
          d += '<img src="' + item.picture + '">'
          d += '</a>'


        });
        document.getElementById('itemsList').innerHTML += d;
      })
      .catch(error => console.error('Error fetching items:', error));
  </script>
</body>

</html>